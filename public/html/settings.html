<!DOCTYPE html>
<html lang="ko" data-page="settings">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>설정 – 도그파인더스</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <script src="../js/scripts.js" defer></script>
  <style>
    .form-card {
      max-width: 600px;
      margin: 2rem auto;
      padding: 2rem;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .form-card h1 {
      margin-bottom: 1.5rem;
      font-size: 2rem;
      text-align: center;
    }
    .mb-3 {
      margin-bottom: 1rem;
    }
    .form-label {
      display: block;
      margin-bottom: 0.3rem;
      font-weight: 600;
    }
    .form-control, .form-select {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button.btn {
      padding: 0.75rem;
      font-size: 1.1rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button.btn-success {
      background-color: #28a745;
      color: white;
    }
    #preview {
      display: none;
      max-width: 200px;
      margin-top: 0.5rem;
      border-radius: 6px;
    }
    hr.my-4 {
      margin: 2rem 0;
      border: none;
      border-top: 1px solid #eee;
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <h2>도그파인더스</h2>
    <ul>
      <li><a href="index">홈</a></li>
      <li><a href="map">지도</a></li>
      <li><a href="post-list">게시글</a></li>
      <li><a href="mailbox">메일함</a></li>
      <li><a href="login">로그인</a></li>
      <li><a href="settings" class="active">설정</a></li>
      <li><a href="contact">문의하기</a></li>
    </ul>
  </aside>

  <main class="main">
    <div class="form-card">
      <h1>프로필 설정</h1>
      <form action="/upload" method="POST" enctype="multipart/form-data">
        <div class="mb-3">
          <label for="userName" class="form-label">이름</label>
          <input type="text" class="form-control" id="userName" name="userName" placeholder="이름을 입력하세요" required />
        </div>
        <div class="mb-3">
          <label for="userEmail" class="form-label">이메일</label>
          <input type="email" class="form-control" id="userEmail" name="userEmail" placeholder="이메일을 입력하세요" required />
        </div>
        <div class="mb-3">
          <label for="userPassword" class="form-label">비밀번호 변경</label>
          <input type="password" class="form-control" id="userPassword" name="userPassword" placeholder="새 비밀번호를 입력하세요" />
        </div>
        <div class="mb-3">
          <label for="userBio" class="form-label">자기소개</label>
          <textarea class="form-control" id="userBio" name="userBio" rows="3" placeholder="간단한 자기소개를 입력하세요"></textarea>
        </div>
        <div class="mb-3">
          <label for="userAddress" class="form-label">주소</label>
          <input type="text" class="form-control" id="userAddress" name="userAddress" placeholder="주소를 입력하세요" required />
        </div>
        <div class="mb-3">
          <label for="userPhone" class="form-label">전화번호</label>
          <input type="tel" class="form-control" id="userPhone" name="userPhone" required />
        </div>
        <div class="mb-3">
          <label for="birthdate" class="form-label">생년월일</label>
          <input type="date" class="form-control" id="birthdate" name="birthdate" required />
        </div>

        <hr class="my-4" />
        <h4 class="mb-3">반려동물 정보</h4>

        <div id="pet-section-container">
          <div class="pet-section">
            <div class="mb-3">
              <label class="form-label">반려동물 종류</label>
              <select class="form-select" name="petType[]" required>
                <option selected disabled>선택하세요</option>
                <option>강아지</option>
                <option>고양이</option>
                <option>기타</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">반려동물 사진</label>
              <input class="form-control petImage" type="file" name="petImage[]" accept="image/*" />
              <img class="preview" src="#" alt="미리보기" />
            </div>
            <div class="mb-3">
              <label class="form-label">반려동물 나이</label>
              <input type="number" class="form-control" name="petAge[]" placeholder="예: 3 (살)" min="0" />
            </div>
            <div class="mb-3">
              <label class="form-label">반려동물 성격</label>
              <input type="text" class="form-control" name="petTemperament[]" placeholder="예: 활발함, 온순함, 낯가림 등" />
            </div>
            <div class="mb-3">
              <label class="form-label">접종한 백신</label>
              <textarea class="form-control" name="petVaccines[]" rows="2" placeholder="예: 종합백신, 광견병, 코로나 등"></textarea>
            </div>
            <hr class="my-4" />
          </div>
        </div>

        <button type="button" class="btn btn-secondary mb-3" onclick="addPetSection()">+ 반려동물 추가</button>

        <button type="submit" class="btn btn-success w-100">저장하기</button>
      </form>
    </div>
  </main>

  <script>
    // 이미지 미리보기
    document.addEventListener('change', function (e) {
      if (e.target.classList.contains('petImage')) {
        const fileInput = e.target;
        const preview = fileInput.nextElementSibling;
        const file = fileInput.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function (event) {
            preview.src = event.target.result;
            preview.style.display = 'block';
          };
          reader.readAsDataURL(file);
        } else {
          preview.style.display = 'none';
        }
      }
    });

    // 반려동물 추가 기능
    function addPetSection() {
      const container = document.getElementById('pet-section-container');
      const firstPet = container.querySelector('.pet-section');
      const newPet = firstPet.cloneNode(true);

      Array.from(newPet.querySelectorAll('input, select, textarea')).forEach(input => {
        input.value = '';
      });

      const preview = newPet.querySelector('.preview');
      preview.src = '#';
      preview.style.display = 'none';

      container.appendChild(newPet);
    }
  </script>
</body>
</html>
